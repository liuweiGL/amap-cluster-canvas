{"version":3,"file":"amap-cluster-canvas.test.js","sources":["amap-cluster-canvas.esm.js","../test/index.js"],"sourcesContent":["var classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")},createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),Canvas=function(){function t(e){classCallCheck(this,t),this.layer=null,this.hoverCanvas=null,this.hoverCanvasCtx=null,this.clusterCanvas=null,this.clusterCanvasCxt=null,this.options=e,this._init()}return createClass(t,[{key:\"_init\",value:function(){var t=this.options,e=t.map,n=t.visible,i=t.zIndex,r=document.createElement(\"div\"),o=document.createElement(\"canvas\");o.style.position=\"absolute\";var a=document.createElement(\"canvas\");a.style.position=\"absolute\",r.appendChild(o),r.appendChild(a),this.clusterCanvas=o,this.hoverCanvas=a,this.clusterCanvasCxt=o.getContext(\"2d\"),this.hoverCanvasCtx=a.getContext(\"2d\"),this.layer=new AMap.CustomLayer(r,{map:e,zIndex:i,visible:n,zooms:[1,20]})}},{key:\"getPixelRatio\",value:function(){return Math.min(2,Math.round(window.devicePixelRatio||1))}},{key:\"setCanvasSize\",value:function(t,e,n){var i=this.getPixelRatio();t.width=e*i,t.height=n*i,t.style.width=e+\"px\",t.style.height=n+\"px\"}},{key:\"clearCluster\",value:function(){var t=this.options.map.getSize(),e=t.width,n=t.height;this.setCanvasSize(this.clusterCanvas,e,n)}}]),t}(),ClusterItem=function(){function t(e,n){classCallCheck(this,t),this.coordinate=e.coordinate,this.points=[e],this.options=n}return createClass(t,[{key:\"getCount\",value:function(){return this.points.length}},{key:\"updateCenter\",value:function(){var t=this.points,e=this.points.length,n=this.coordinate,i=n.x,r=n.y;if(this.options.isAverageCenter){var o=t[e-1].coordinate,a=(i*(e-1)+o.x)/e,s=(r*(e-1)+o.y)/e;this.coordinate={x:a,y:s}}}},{key:\"addPoint\",value:function(t){this.points.push(t),this.updateCenter()}},{key:\"contains\",value:function(t){var e=t.coordinate,n=e.x,i=e.y,r=this.coordinate,o=r.x,a=r.y,s=this.options.gridSize;return n>=o-s&&n<=o+s&&i>=a-s&&i<=a+s}}]),t}();function lonLat2Mercator(t){var e=slicedToArray(t,2),n=e[0],i=e[1],r=20037508.34*n/180,o=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return{x:r,y:o=20037508.34*o/180}}function mercator2LonLat(t){var e=t.x,n=t.y/20037508.34*180;return[e/20037508.34*180,n=180/Math.PI*(2*Math.atan(Math.exp(n*Math.PI/180))-Math.PI/2)]}var ClusterTypes={ZOOM:\"zoom\",PIXEL:\"pixel\"},defaultStyle={width:60,height:69},defaultOptions={type:ClusterTypes.PIXEL,maxZoom:18,gridSize:60,minClusterSize:2,averageCenter:!0,zoomOnClick:!0,zIndex:120,visible:!0,getPosition:function(t){var e=t.location;return e?[e.longitude,e.latitude]:null},render:null,hoverRender:null,clickHandler:null,mouseoutHandler:null,mouseoverHandler:null,mousemoveHandler:null,normalPointStyle:defaultStyle,clusterPointStyle:defaultStyle,hoverNormalPointStyle:defaultStyle,hoverClusterPointStyle:defaultStyle},Cluster=function(){function t(e){classCallCheck(this,t);var n=e.map,i=e.data;this.options=Object.assign({},defaultOptions,e),this.points=[],this.buildFn=null,this.pixelFn=null,this.lastPixel={},this.oldHoverPoint=null,this.renderTimer=null,this.clusterItems=null,this.renderEngine=new Canvas({map:n,zIndex:this.options.zIndex,visible:this.options.visible}),this._init(i),this._customEngine(),this._bindEvent()}return createClass(t,[{key:\"renderLater\",value:function(t){this.renderTimer||(this.renderTimer=setTimeout(this.render.bind(this),t||50))}},{key:\"render\",value:function(){var t=this,e=this.points,n=this.options,i=n.render,r=n.normalPointStyle,o=n.clusterPointStyle,a=this.renderEngine.clusterCanvasCxt;this.renderTimer&&(clearTimeout(this.renderTimer),this.renderTimer=null),this.renderEngine.clearCluster(),e.forEach(function(e){var n=t.pixelFn(e.coordinate),s=n.x,l=n.y,u=t._isCluster(e),h=u?o:r,c=h.width,d=h.height;i(a,s-c/2,l-d/2,c,d,{isCluster:u,data:e})})}},{key:\"setData\",value:function(t){this.data=t,this._buildCluster(),this.render()}},{key:\"_init\",value:function(t){this._createBuildFn(),this._createPixelFn(),this.setData(t)}},{key:\"_createBuildFn\",value:function(){var t=this,e=this.options,n=e.map,i=e.type,r=e.gridSize,o=e.averageCenter,a=e.getPosition;i===ClusterTypes.PIXEL?this.buildFn=function(){var e=n.getBounds(),i={gridSize:r,averageCenter:o};t.data.forEach(function(r){var o=a(r);o&&e.contains(o)&&(r.coordinate=n.lngLatToContainer(o),t._buildClusterItem(r,i))})}:this.buildFn=function(){var e=n.getZoom(),i=t._getExtendedBounds(),s={averageCenter:o,gridSize:r*Math.pow(2,18-e)};t.data.forEach(function(e){var n=a(e);n&&(e.coordinate||(e.coordinate=lonLat2Mercator(n)),t._pointInScreen(i,e.coordinate)&&t._buildClusterItem(e,s))})}}},{key:\"_createPixelFn\",value:function(){var t=this.options,e=t.type,n=t.map;e===ClusterTypes.PIXEL?this.pixelFn=function(t){return t}:this.pixelFn=function(t){var e=mercator2LonLat(t);return n.lngLatToContainer(e)}}},{key:\"_buildCluster\",value:function(){this.clusterItems=[],this.data&&(this.buildFn(),this._updatePoints(),this.render())}},{key:\"_buildClusterItem\",value:function(t,e){var n=null,i=-1,r=t.coordinate,o=r.x,a=r.y;if(this.clusterItems.forEach(function(e){if(e.contains(t)){var r=e.coordinate,s=r.x,l=r.y,u=Math.pow(o-s,2)+Math.pow(a-l,2);(i<0||i>u)&&(n=e,i=u)}}),n)n.addPoint(t);else{var s=new ClusterItem(t,e);this.clusterItems.push(s)}}},{key:\"_updatePoints\",value:function(){var t=this.clusterItems,e=this.options,n=e.map,i=e.minClusterSize,r=e.maxZoom;if(n.getZoom()>=r)this.points=t.reduce(function(t,e){return t.concat(e.points)},[]);else{var o=[];t.forEach(function(t){t.getCount()>=i?o.push(t):o=o.concat(t.points)}),this.points=o}}},{key:\"_customEngine\",value:function(){this.renderEngine.layer.render=this._buildCluster.bind(this)}},{key:\"_bindEvent\",value:function(){var t=this.options.map;t.on(\"click\",this._clickHandler.bind(this)),t.on(\"mousemove\",this._mousemoveHandler.bind(this))}},{key:\"_clickHandler\",value:function(t){var e=t.pixel,n=this._findEventPoint(e);if(n){var i=this.options,r=i.zoomOnClick,o=i.clickHandler,a={data:n,isCluster:this._isCluster(n)};this.mouseoutHandler(),r&&this._zoomOnClickHandler(a),this._isFunction(o)&&o(a)}}},{key:\"_mousemoveHandler\",value:function(t){var e=t.pixel,n=this.lastPixel,i=this.oldHoverPoint;if(n.x!==e.x||n.y!==e.y){var r=this._findEventPoint(e);r!==i&&(this.mouseoutHandler(r),this.mouseoverHandler(r),this.lastPixel=e)}}},{key:\"mouseoutHandler\",value:function(t){var e=this.oldHoverPoint,n=this.options.mouseoutHandler;e&&(this._clearHoverPoint(),this._isFunction(n)&&n({data:e,isCluster:this._isCluster(e)})),this.oldHoverPoint=t}},{key:\"mouseoverHandler\",value:function(t){if(t){var e=this.options.mouseoverHandler,n={data:t,isCluster:this._isCluster(t)};this._drawHoverPoint(n),this._isFunction(e)&&e(n)}}},{key:\"_zoomOnClickHandler\",value:function(t){var e=t.isCluster,n=t.data.coordinate;if(e){var i=this.options.map,r=(0,this.pixelFn)(n),o=i.containerToLngLat(r);i.setCenter(o),i.zoomIn()}}},{key:\"_drawHoverPoint\",value:function(t){var e=this.options,n=e.hoverRender,i=e.normalPointStyle,r=e.clusterPointStyle,o=this.renderEngine,a=this.renderEngine,s=a.hoverCanvas,l=a.hoverCanvasCtx;if(this._isFunction(n)){var u=t.isCluster,h=t.data.coordinate,c=h.x,d=h.y,v=u?r:i,f=v.width,y=v.height,p=f+20,C=y+20,m=c-p/2,x=d-C/2,g=o.getPixelRatio();s.style.left=m+\"px\",s.style.top=x+\"px\",s.style.cursor=\"pointer\",o.setCanvasSize(s,p,C),l.save(),l.translate(-m*g,-x*g),n(l,m+10,x+10,f,y,t),l.restore()}}},{key:\"_clearHoverPoint\",value:function(){var t=this.renderEngine,e=this.renderEngine.hoverCanvas;t.setCanvasSize(e,0,0)}},{key:\"_findEventPoint\",value:function(t){var e=this,n=this.points,i=this._constains,r=this.options,o=r.normalPointStyle,a=r.clusterPointStyle,s=[],l=[];n.forEach(function(t){e._isCluster(t)?s.push(t):l.push(t)});for(var u=0,h=s.length;u<h;u++){var c=s[u];if(i(c.coordinate,t,a))return c}for(var d=0,v=l.length;d<v;d++){var f=l[d];if(i(f.coordinate,t,o))return f}return null}},{key:\"_constains\",value:function(t,e,n){var i=n.width,r=n.height,o=t.x,a=t.y,s=e.x,l=e.y;return s>=o-i/2&&s<=o+i/2&&l>=a-r/2&&l<=a+r/2}},{key:\"_getExtendedBounds\",value:function(){var t=this.options,e=t.map,n=t.gridSize,i=e.getZoom(),r=e.getBounds(),o=r.getSouthWest(),a=r.getNorthEast(),s=lonLat2Mercator([o.lng,o.lat]),l=lonLat2Mercator([a.lng,a.lat]),u=n*Math.pow(2,18-i);return s.x-=u,s.y-=u,l.x+=u,l.y+=u,[s,l]}},{key:\"_pointInScreen\",value:function(t,e){var n=slicedToArray(t,2),i=n[0],r=n[1],o=e.x,a=e.y;return r.x<=0||o>=i.x&&o<=r.x&&a>=i.y&&a<=r.y}},{key:\"_isFunction\",value:function(t){return\"function\"==typeof t}},{key:\"_isCluster\",value:function(t){return t instanceof ClusterItem}}]),t}();export default Cluster;export{ClusterTypes};\n//# sourceMappingURL=amap-cluster-canvas.esm.js.map\n","// import Cluster from './lib/cluster'\r\nimport Cluster from '../dist/amap-cluster-canvas.esm.js'\r\n\r\nfunction drawCircle(ctx, x, y, r, color = 'red') {\r\n  ctx.fillStyle = color\r\n  ctx.beginPath()\r\n  ctx.arc(x, y, r, 0, Math.PI * 2)\r\n  ctx.fill()\r\n}\r\n\r\nfunction drawText(ctx, x, y, text, color = 'white') {\r\n  ctx.font = '18px SimHei'\r\n  ctx.textAlign = 'center'\r\n  ctx.textBaseline = 'middle'\r\n  ctx.fillStyle = color\r\n  ctx.fillText(text, x, y)\r\n}\r\n\r\nfunction random(basic, offset) {\r\n  let change = Math.random() * offset\r\n  change = Math.random() > 0.5 ? change : -change\r\n  return basic + change\r\n}\r\n\r\nconst data = []\r\nconst longitude = 117.000923\r\nconst latitude = 36.675807\r\nfor (let i = 0; i < 100000; i++) {\r\n  data.push([random(longitude, 5), random(latitude, 5)])\r\n}\r\nconst map = new AMap.Map('container', {\r\n  zoom: 11,\r\n  center: [longitude, latitude]\r\n})\r\n// `cluster` 依赖 `AMap.CustomLayer`\r\nAMap.plugin('AMap.CustomLayer', function () {\r\n  const cluster = new Cluster({\r\n    map,\r\n    data,\r\n    type: 'zoom',\r\n    getPosition: (item) => item,\r\n    render(ctx, x, y, width, height, point) {\r\n      const {\r\n        isCluster,\r\n        data\r\n      } = point\r\n      if (isCluster) {\r\n        drawCircle(ctx, x, y, width / 2)\r\n        drawText(ctx, x, y, data.getCount())\r\n      } else {\r\n        drawCircle(ctx, x, y, width / 6, 'green')\r\n      }\r\n    }\r\n  })\r\n  window.cluster = cluster\r\n})"],"names":["classCallCheck","t","e","TypeError","createClass","n","length","i","enumerable","configurable","writable","Object","defineProperty","key","prototype","slicedToArray","Array","isArray","Symbol","iterator","r","o","a","s","next","done","push","value","return","Canvas","layer","hoverCanvas","hoverCanvasCtx","clusterCanvas","clusterCanvasCxt","options","_init","map","visible","zIndex","document","createElement","style","position","appendChild","getContext","AMap","CustomLayer","zooms","Math","min","round","window","devicePixelRatio","getPixelRatio","width","height","getSize","setCanvasSize","ClusterItem","coordinate","points","x","y","isAverageCenter","updateCenter","gridSize","lonLat2Mercator","log","tan","PI","mercator2LonLat","atan","exp","ClusterTypes","ZOOM","PIXEL","defaultStyle","defaultOptions","type","maxZoom","minClusterSize","averageCenter","zoomOnClick","getPosition","location","longitude","latitude","render","hoverRender","clickHandler","mouseoutHandler","mouseoverHandler","mousemoveHandler","normalPointStyle","clusterPointStyle","hoverNormalPointStyle","hoverClusterPointStyle","Cluster","data","assign","buildFn","pixelFn","lastPixel","oldHoverPoint","renderTimer","clusterItems","renderEngine","_customEngine","_bindEvent","setTimeout","bind","clearTimeout","clearCluster","forEach","l","u","_isCluster","h","c","d","isCluster","_buildCluster","_createBuildFn","_createPixelFn","setData","getBounds","contains","lngLatToContainer","_buildClusterItem","getZoom","_getExtendedBounds","pow","_pointInScreen","_updatePoints","addPoint","reduce","concat","getCount","on","_clickHandler","_mousemoveHandler","pixel","_findEventPoint","_zoomOnClickHandler","_isFunction","_clearHoverPoint","_drawHoverPoint","containerToLngLat","setCenter","zoomIn","v","f","p","C","m","g","left","top","cursor","save","translate","restore","_constains","getSouthWest","getNorthEast","lng","lat","drawCircle","ctx","color","fillStyle","beginPath","arc","fill","drawText","text","font","textAlign","textBaseline","fillText","random","basic","offset","change","Map","zoom","center","plugin","cluster","item","point"],"mappings":"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"}